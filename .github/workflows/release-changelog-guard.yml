name: Changelog Guard
on:
  pull_request:
    paths:
      - 'CHANGELOG.md'

concurrency:
  group: "${{ github.ref_name }}-${{ github.head_ref }}-changelog-guard"
  cancel-in-progress: true

permissions:
  contents: read

jobs:
  check_changelog:
    name: Check CHANGELOG.md modifications
    runs-on: ubuntu-latest
    steps:
    - name: Fail if CHANGELOG.md was modified üö´
      run: |
        echo "‚ùå ERROR: CHANGELOG.md has been modified in this PR."
        echo ""
        echo "The CHANGELOG.md file should not be manually edited. It is automatically generated "
        echo "from Pull Request titles using Conventional Commits and release-please."
        echo ""
        echo "To ensure your PR appears correctly in the changelog:"
        echo "  1. Format your PR title following Conventional Commits (e.g., 'feat: add new feature')"
        echo "  2. See docs/developer/contributing.md for detailed guidelines"
        echo ""
        exit 1
