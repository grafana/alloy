otelcol.receiver.otlp/default:
  grpc:
    endpoint: localhost:4317
  http:
    endpoint: localhost:4318
  output:
    logs:
      - expr(otelcol.processor.groupbyattrs.default.input)
    metrics:
      - expr(otelcol.processor.groupbyattrs.default.input)
    traces:
      - expr(otelcol.processor.groupbyattrs.default.input)

otelcol.processor.groupbyattrs/default:
  keys:
    - k8s.namespace.name
    - k8s.deployment.name
  output:
    logs:
      - expr(otelcol.exporter.otlp.default.input)
    metrics:
      - expr(otelcol.exporter.otlp.default.input)
    traces:
      - expr(otelcol.exporter.otlp.default.input)

otelcol.exporter.otlp/default:
  client:
    endpoint: database:4317
